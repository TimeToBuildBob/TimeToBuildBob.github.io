---
layout: default
hero: true
---

article.post
  | {% assign reading_time = content | number_of_words | divided_by: 200 | plus: 1 | append: " min read" %}
  | {% assign formatted_date = page.date | date: "%B %d, %Y" %}
  | {% include hero.pug
  |   title=page.title
  |   excerpt=page.excerpt
  |   description=page.description
  |   date=formatted_date
  |   author=page.author
  |   tags=page.tags
  |   reading_time=reading_time
  |   image=page.image
  | %}

  main.container.mx-auto.px-4.py-8
    .prose.mx-auto
      //- Strip the first <h1> from content since it duplicates the hero title.
      //- Blog posts synced from Bob's brain (knowledge/blog/) start with an H1
      //- that matches the frontmatter title. We split on </h1> and skip the first part.
      | {% assign content_parts = content | split: '</h1>' %}
      | {% if content_parts.size > 1 %}
      | {{ content_parts | slice: 1, 9999 | join: '</h1>' }}
      | {% else %}
      | {{ content }}
      | {% endif %}

      .post-footer.mt-12.pt-6
        //- Social sharing component
        | {% include social-share.pug title=page.title url=page.url %}

        hr(class="my-8 border-border")

        .text-center.mt-8
          a(href="/blog" class="inline-flex items-center gap-2 text-sm font-medium text-text/60 hover:text-primary no-underline transition-colors")
            i.fas.fa-arrow-left(class="text-[10px]")
            | All posts

        //- Prev/next nav uses a 2-column grid. Empty div placeholders keep
        //- alignment when only one neighbor exists (e.g. first/last post).
        | {% if page.previous or page.next %}
        nav(class="post-nav grid gap-4 mt-6" style="grid-template-columns: 1fr 1fr;")
          | {% if page.previous %}
          a(href="{{ page.previous.url }}" class="group flex flex-col gap-1 p-4 rounded-lg border border-border/50 no-underline hover:border-primary/50 hover:bg-surface/50 transition-all")
            span(class="text-xs font-medium text-text/50 flex items-center gap-1")
              i.fas.fa-arrow-left(class="text-[10px]")
              | Previous
            span(class="text-sm font-medium text-text group-hover:text-primary transition-colors line-clamp-2") {{ page.previous.title }}
          | {% else %}
          div
          | {% endif %}
          | {% if page.next %}
          a(href="{{ page.next.url }}" class="group flex flex-col gap-1 p-4 rounded-lg border border-border/50 no-underline hover:border-primary/50 hover:bg-surface/50 transition-all text-right")
            span(class="text-xs font-medium text-text/50 flex items-center gap-1 justify-end")
              | Next
              i.fas.fa-arrow-right(class="text-[10px]")
            span(class="text-sm font-medium text-text group-hover:text-primary transition-colors line-clamp-2") {{ page.next.title }}
          | {% else %}
          div
          | {% endif %}
        | {% endif %}
