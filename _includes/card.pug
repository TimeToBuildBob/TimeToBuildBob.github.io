//- Card component for posts, projects, and notes
//- Usage: {% include card.pug type="post" url=post.url title=post.title date=post.date excerpt=post.excerpt tags=post.tags %}
article.card.group.rounded-xl.shadow-sm.border.overflow-hidden.relative(class="{{ include.type }}-card hover:shadow-md hover:-translate-y-0.5 transition-all duration-200 border-border/50")
  //- Status accent bar
  | {% if include.status %}
  | {% case include.status %}
  | {% when 'completed' or 'done' %}
  .absolute.left-0.top-0.bottom-0(class="w-1 bg-success")
  | {% when 'in-progress' or 'active' %}
  .absolute.left-0.top-0.bottom-0(class="w-1 bg-primary")
  | {% when 'paused' %}
  .absolute.left-0.top-0.bottom-0(class="w-1 bg-warning")
  | {% else %}
  .absolute.left-0.top-0.bottom-0(class="w-1 bg-border")
  | {% endcase %}
  | {% endif %}

  .card-content.p-5
    //- Header with title and status badge
    .card-header.mb-2
      .flex.items-start.gap-3.mb-1
        h2.card-title.text-lg.font-bold.flex-1(class="text-text group-hover:text-primary transition-colors")
          a.no-underline.transition-colors.duration-200(href="{{ include.url }}" class="text-text hover:text-primary") {{ include.title }}
        | {% if include.status %}
        | {% case include.status %}
        | {% when 'completed' or 'done' %}
        span.inline-flex.items-center.rounded-md.text-xs.font-medium.whitespace-nowrap(class="px-2 py-1 bg-success/10 text-success border border-success/20")
          i.fas.fa-check-circle.mr-1
          | {{ include.status | capitalize }}
        | {% when 'in-progress' or 'active' %}
        span.inline-flex.items-center.rounded-md.text-xs.font-medium.whitespace-nowrap(class="px-2 py-1 bg-primary/10 text-primary border border-primary/20")
          i.fas.fa-spinner.mr-1
          | {{ include.status | capitalize }}
        | {% when 'paused' %}
        span.inline-flex.items-center.rounded-md.text-xs.font-medium.whitespace-nowrap(class="px-2 py-1 bg-warning/10 text-warning border border-warning/20")
          i.fas.fa-pause-circle.mr-1
          | {{ include.status | capitalize }}
        | {% else %}
        span.inline-flex.items-center.rounded-md.text-xs.font-medium.whitespace-nowrap(class="px-2 py-1 bg-surface text-text/60 border border-border")
          | {{ include.status | capitalize }}
        | {% endcase %}
        | {% endif %}

      //- Date
      | {% if include.date %}
      p.text-xs.flex.items-center(class="text-text/50")
        i.far.fa-calendar.mr-1
        | {{ include.date | date: "%b %d, %Y" }}
      | {% endif %}

    //- Excerpt
    | {% if include.excerpt %}
    | {% assign excerpt_stripped = include.excerpt | strip_html | strip | truncatewords: 25 %}
    | {% assign title_stripped = include.title | strip %}
    | {% unless excerpt_stripped == title_stripped %}
    p.leading-relaxed.mb-2.text-sm(class="text-text/70") {{ excerpt_stripped }}
    | {% endunless %}
    | {% endif %}

    //- Tags
    | {% if include.tags %}
    .flex.flex-wrap.gap-1.mb-3
      | {% for tag in include.tags %}
      a.text-xs.font-medium.no-underline(href="/tags/#{{ tag }}" class="text-text/50 hover:text-primary transition-colors") \#{{ tag }}
      | {% endfor %}
    | {% endif %}

    //- Project links
    | {% if include.type == "project" and include.github or include.demo %}
    .flex.flex-wrap.pt-3.border-t(class="gap-2 border-border/50")
      | {% if include.demo %}
      a.inline-flex.items-center.text-xs.rounded-md.no-underline(href="{{ include.demo }}" class="px-2 py-1 bg-primary/10 text-primary hover:bg-primary/20 transition-colors")
        i.fas.fa-external-link-alt.mr-1
        | Demo
      | {% endif %}
      | {% if include.github %}
      a.inline-flex.items-center.text-xs.rounded-md.no-underline(href="https://github.com/{{ include.github }}" class="px-2 py-1 bg-surface text-text/70 hover:text-text border border-border/50 transition-colors")
        i.fab.fa-github.mr-1
        | GitHub
      | {% endif %}
    | {% endif %}

    //- Read more for posts/notes
    | {% if include.type != "project" %}
    .pt-3.border-t(class="border-border/50")
      a.inline-flex.items-center.text-sm.font-medium.no-underline(href="{{ include.url }}" class="text-primary hover:text-primary/80 transition-colors")
        | Read more
        i.fas.fa-arrow-right.ml-1.text-xs.transition-transform.duration-200(class="group-hover:translate-x-1")
    | {% endif %}
